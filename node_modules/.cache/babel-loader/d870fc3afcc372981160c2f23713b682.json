{"ast":null,"code":"import _regeneratorRuntime from\"/Users/salmon/GitSpace/study/React/nwitter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/salmon/GitSpace/study/React/nwitter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/salmon/GitSpace/study/React/nwitter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{dbService,storageService}from\"fbase\";import React,{useState}from\"react\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faTrash,faPencilAlt}from\"@fortawesome/free-solid-svg-icons\";var Nweet=function Nweet(_ref){var nweetObj=_ref.nweetObj,isOwner=_ref.isOwner;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editing=_useState2[0],setEditing=_useState2[1];var _useState3=useState(nweetObj.text),_useState4=_slicedToArray(_useState3,2),newNweet=_useState4[0],setNewNweet=_useState4[1];var onDeleteClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var ok;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:ok=window.confirm(\"Are you sure you want to delete this nweet?\");if(!ok){_context.next=6;break;}_context.next=4;return dbService.doc(\"nweets/\".concat(nweetObj.id)).delete();case 4:_context.next=6;return storageService.refFromURL(nweetObj.attachmentUrl).delete();case 6:case\"end\":return _context.stop();}}},_callee);}));return function onDeleteClick(){return _ref2.apply(this,arguments);};}();var onSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();_context2.next=3;return dbService.doc(\"nweets/\".concat(nweetObj.id)).update({text:newNweet});case 3:setEditing(false);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmit(_x){return _ref3.apply(this,arguments);};}();var onChange=function onChange(event){var value=event.target.value;setNewNweet(value);};var toggleEditing=function toggleEditing(){return setEditing(function(prev){return!prev;});};return/*#__PURE__*/React.createElement(\"div\",{className:\"nweet\"},editing?/*#__PURE__*/React.createElement(React.Fragment,null,isOwner&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit,className:\"container nweetEdit\"},/*#__PURE__*/React.createElement(\"input\",{onChange:onChange,type:\"text\",placeholder:\"Edit your nweet\",value:newNweet,required:true,autoFocus:true,className:\"formInput\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Update Nweet\",className:\"formBtn\"})),/*#__PURE__*/React.createElement(\"span\",{onClick:toggleEditing,className:\"formBtn cancelBtn\"},\"Cancel\"))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h4\",null,nweetObj.text),nweetObj.attachmentUrl&&/*#__PURE__*/React.createElement(\"img\",{src:nweetObj.attachmentUrl}),isOwner&&/*#__PURE__*/React.createElement(\"div\",{class:\"nweet__actions\"},/*#__PURE__*/React.createElement(\"span\",{onClick:onDeleteClick},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faTrash})),/*#__PURE__*/React.createElement(\"span\",{onClick:toggleEditing},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPencilAlt})))));};export default Nweet;","map":{"version":3,"sources":["/Users/salmon/GitSpace/study/React/nwitter/src/components/Nweet.js"],"names":["dbService","storageService","React","useState","FontAwesomeIcon","faTrash","faPencilAlt","Nweet","nweetObj","isOwner","editing","setEditing","text","newNweet","setNewNweet","onDeleteClick","ok","window","confirm","doc","id","delete","refFromURL","attachmentUrl","onSubmit","event","preventDefault","update","onChange","value","target","toggleEditing","prev"],"mappings":"geAAA,OAASA,SAAT,CAAoBC,cAApB,KAA0C,OAA1C,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,eAAT,KAAgC,gCAAhC,CACA,OAASC,OAAT,CAAkBC,WAAlB,KAAqC,mCAArC,CAEA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,MAA2B,IAAxBC,CAAAA,QAAwB,MAAxBA,QAAwB,CAAdC,OAAc,MAAdA,OAAc,eACTN,QAAQ,CAAC,KAAD,CADC,wCAChCO,OADgC,eACvBC,UADuB,8BAEPR,QAAQ,CAACK,QAAQ,CAACI,IAAV,CAFD,yCAEhCC,QAFgC,eAEtBC,WAFsB,eAGvC,GAAMC,CAAAA,aAAa,2FAAG,0IACdC,EADc,CACTC,MAAM,CAACC,OAAP,CAAe,6CAAf,CADS,KAEhBF,EAFgB,+CAIZhB,CAAAA,SAAS,CAACmB,GAAV,kBAAwBX,QAAQ,CAACY,EAAjC,GAAuCC,MAAvC,EAJY,8BAKZpB,CAAAA,cAAc,CAACqB,UAAf,CAA0Bd,QAAQ,CAACe,aAAnC,EAAkDF,MAAlD,EALY,uDAAH,kBAAbN,CAAAA,aAAa,2CAAnB,CASA,GAAMS,CAAAA,QAAQ,2FAAG,kBAAOC,KAAP,sHACfA,KAAK,CAACC,cAAN,GADe,uBAET1B,CAAAA,SAAS,CAACmB,GAAV,kBAAwBX,QAAQ,CAACY,EAAjC,GAAuCO,MAAvC,CAA8C,CAClDf,IAAI,CAAEC,QAD4C,CAA9C,CAFS,QAKfF,UAAU,CAAC,KAAD,CAAV,CALe,wDAAH,kBAARa,CAAAA,QAAQ,6CAAd,CAQA,GAAMI,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACH,KAAD,CAAW,IAEdI,CAAAA,KAFc,CAGtBJ,KAHsB,CAExBK,MAFwB,CAEdD,KAFc,CAI1Bf,WAAW,CAACe,KAAD,CAAX,CACD,CALD,CAOA,GAAME,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,SAAMpB,CAAAA,UAAU,CAAC,SAACqB,IAAD,QAAU,CAACA,IAAX,EAAD,CAAhB,EAAtB,CACA,mBACE,2BAAK,SAAS,CAAC,OAAf,EACGtB,OAAO,cACN,wCACGD,OAAO,eACN,qDACE,4BAAM,QAAQ,CAAEe,QAAhB,CAA0B,SAAS,CAAC,qBAApC,eACE,6BACE,QAAQ,CAAEI,QADZ,CAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,iBAHd,CAIE,KAAK,CAAEf,QAJT,CAKE,QAAQ,KALV,CAME,SAAS,KANX,CAOE,SAAS,CAAC,WAPZ,EADF,cAUE,6BAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,cAA3B,CAA0C,SAAS,CAAC,SAApD,EAVF,CADF,cAaE,4BAAM,OAAO,CAAEkB,aAAf,CAA8B,SAAS,CAAC,mBAAxC,WAbF,CAFJ,CADM,cAuBN,qDACE,8BAAKvB,QAAQ,CAACI,IAAd,CADF,CAEGJ,QAAQ,CAACe,aAAT,eAA0B,2BAAK,GAAG,CAAEf,QAAQ,CAACe,aAAnB,EAF7B,CAGGd,OAAO,eACN,2BAAK,KAAK,CAAC,gBAAX,eACE,4BAAM,OAAO,CAAEM,aAAf,eACE,oBAAC,eAAD,EAAiB,IAAI,CAAEV,OAAvB,EADF,CADF,cAIE,4BAAM,OAAO,CAAE0B,aAAf,eACE,oBAAC,eAAD,EAAiB,IAAI,CAAEzB,WAAvB,EADF,CAJF,CAJJ,CAxBJ,CADF,CA0CD,CAtED,CAwEA,cAAeC,CAAAA,KAAf","sourcesContent":["import { dbService, storageService } from \"fbase\";\nimport React, { useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTrash, faPencilAlt } from \"@fortawesome/free-solid-svg-icons\";\n\nconst Nweet = ({ nweetObj, isOwner }) => {\n  const [editing, setEditing] = useState(false);\n  const [newNweet, setNewNweet] = useState(nweetObj.text);\n  const onDeleteClick = async () => {\n    const ok = window.confirm(\"Are you sure you want to delete this nweet?\");\n    if (ok) {\n      //delete nweet\n      await dbService.doc(`nweets/${nweetObj.id}`).delete();\n      await storageService.refFromURL(nweetObj.attachmentUrl).delete();\n    }\n  };\n\n  const onSubmit = async (event) => {\n    event.preventDefault();\n    await dbService.doc(`nweets/${nweetObj.id}`).update({\n      text: newNweet,\n    });\n    setEditing(false);\n  };\n\n  const onChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setNewNweet(value);\n  };\n\n  const toggleEditing = () => setEditing((prev) => !prev);\n  return (\n    <div className=\"nweet\">\n      {editing ? (\n        <>\n          {isOwner && (\n            <>\n              <form onSubmit={onSubmit} className=\"container nweetEdit\">\n                <input\n                  onChange={onChange}\n                  type=\"text\"\n                  placeholder=\"Edit your nweet\"\n                  value={newNweet}\n                  required\n                  autoFocus\n                  className=\"formInput\"\n                />\n                <input type=\"submit\" value=\"Update Nweet\" className=\"formBtn\" />\n              </form>\n              <span onClick={toggleEditing} className=\"formBtn cancelBtn\">\n                Cancel\n              </span>\n            </>\n          )}\n        </>\n      ) : (\n        <>\n          <h4>{nweetObj.text}</h4>\n          {nweetObj.attachmentUrl && <img src={nweetObj.attachmentUrl} />}\n          {isOwner && (\n            <div class=\"nweet__actions\">\n              <span onClick={onDeleteClick}>\n                <FontAwesomeIcon icon={faTrash} />\n              </span>\n              <span onClick={toggleEditing}>\n                <FontAwesomeIcon icon={faPencilAlt} />\n              </span>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Nweet;\n"]},"metadata":{},"sourceType":"module"}