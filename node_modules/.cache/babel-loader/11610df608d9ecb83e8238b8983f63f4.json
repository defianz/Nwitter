{"ast":null,"code":"var _jsxFileName = \"/Users/salmon/GitSpace/study/React/nwitter/src/routes/Home.js\";\nimport Nweet from \"components/Nweet\";\nimport NweetFactory from \"components/NweetFactory\";\nimport { dbService } from \"fbase\";\nimport React, { useEffect, useState } from \"react\"; // export default () => <Span>Home</Span>;\n\nconst Home = ({\n  userObj\n}) => {\n  const [nweets, setNweets] = useState([]); //   const getNweets = async () => {\n  //     const dbNweets = await dbService.collection(\"nweets\").get();\n  //     dbNweets.forEach((document) => {\n  //       const nweetObject = {\n  //         ...document.data(),\n  //         id: document.id,\n  //       };\n  //       setNweets((prev) => [nweetObject, ...prev]);\n  //     });\n  //   };\n\n  useEffect(() => {\n    // getNweets();\n    dbService.collection(\"nweets\").onSnapshot(snapshot => {\n      const nweetArray = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      nweetArray.sort((a, b) => {\n        return a.createdAt > b.createdAt ? -1 : a.createdAt < b.createdAt ? 1 : 0;\n      });\n      console.log(nweetArray);\n      setNweets(nweetArray);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(NweetFactory, {\n    userObj: userObj,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, nweets.map(nweet => /*#__PURE__*/React.createElement(Nweet, {\n    key: nweet.id,\n    nweetObj: nweet,\n    isOwner: nweet.creatorId === userObj.uid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default Home;","map":{"version":3,"sources":["/Users/salmon/GitSpace/study/React/nwitter/src/routes/Home.js"],"names":["Nweet","NweetFactory","dbService","React","useEffect","useState","Home","userObj","nweets","setNweets","collection","onSnapshot","snapshot","nweetArray","docs","map","doc","id","data","sort","a","b","createdAt","console","log","marginTop","nweet","creatorId","uid"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,kBAAlB;AACA,OAAOC,YAAP,MAAyB,yBAAzB;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C,C,CAEA;;AAEA,MAAMC,IAAI,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAiB;AAC5B,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBJ,QAAQ,CAAC,EAAD,CAApC,CAD4B,CAG5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd;AACAF,IAAAA,SAAS,CAACQ,UAAV,CAAqB,QAArB,EAA+BC,UAA/B,CAA2CC,QAAD,IAAc;AACtD,YAAMC,UAAU,GAAGD,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAmBC,GAAD,KAAU;AAC7CC,QAAAA,EAAE,EAAED,GAAG,CAACC,EADqC;AAE7C,WAAGD,GAAG,CAACE,IAAJ;AAF0C,OAAV,CAAlB,CAAnB;AAIAL,MAAAA,UAAU,CAACM,IAAX,CAAgB,CAACC,CAAD,EAAIC,CAAJ,KAAU;AACxB,eAAOD,CAAC,CAACE,SAAF,GAAcD,CAAC,CAACC,SAAhB,GACH,CAAC,CADE,GAEHF,CAAC,CAACE,SAAF,GAAcD,CAAC,CAACC,SAAhB,GACA,CADA,GAEA,CAJJ;AAKD,OAND;AAOAC,MAAAA,OAAO,CAACC,GAAR,CAAYX,UAAZ;AACAJ,MAAAA,SAAS,CAACI,UAAD,CAAT;AACD,KAdD;AAeD,GAjBQ,EAiBN,EAjBM,CAAT;AAmBA,sBACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAc,IAAA,OAAO,EAAEN,OAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAK,IAAA,KAAK,EAAE;AAAEkB,MAAAA,SAAS,EAAE;AAAb,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGjB,MAAM,CAACO,GAAP,CAAYW,KAAD,iBACV,oBAAC,KAAD;AACE,IAAA,GAAG,EAAEA,KAAK,CAACT,EADb;AAEE,IAAA,QAAQ,EAAES,KAFZ;AAGE,IAAA,OAAO,EAAEA,KAAK,CAACC,SAAN,KAAoBpB,OAAO,CAACqB,GAHvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CADH,CAFF,CADF;AAcD,CA/CD;;AAiDA,eAAetB,IAAf","sourcesContent":["import Nweet from \"components/Nweet\";\nimport NweetFactory from \"components/NweetFactory\";\nimport { dbService } from \"fbase\";\nimport React, { useEffect, useState } from \"react\";\n\n// export default () => <Span>Home</Span>;\n\nconst Home = ({ userObj }) => {\n  const [nweets, setNweets] = useState([]);\n\n  //   const getNweets = async () => {\n  //     const dbNweets = await dbService.collection(\"nweets\").get();\n  //     dbNweets.forEach((document) => {\n  //       const nweetObject = {\n  //         ...document.data(),\n  //         id: document.id,\n  //       };\n  //       setNweets((prev) => [nweetObject, ...prev]);\n  //     });\n  //   };\n\n  useEffect(() => {\n    // getNweets();\n    dbService.collection(\"nweets\").onSnapshot((snapshot) => {\n      const nweetArray = snapshot.docs.map((doc) => ({\n        id: doc.id,\n        ...doc.data(),\n      }));\n      nweetArray.sort((a, b) => {\n        return a.createdAt > b.createdAt\n          ? -1\n          : a.createdAt < b.createdAt\n          ? 1\n          : 0;\n      });\n      console.log(nweetArray);\n      setNweets(nweetArray);\n    });\n  }, []);\n\n  return (\n    <div className=\"container\">\n      <NweetFactory userObj={userObj} />\n      <div style={{ marginTop: 30 }}>\n        {nweets.map((nweet) => (\n          <Nweet\n            key={nweet.id}\n            nweetObj={nweet}\n            isOwner={nweet.creatorId === userObj.uid}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}