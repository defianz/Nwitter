{"ast":null,"code":"import _regeneratorRuntime from\"/Users/salmon/GitSpace/study/React/nwitter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/salmon/GitSpace/study/React/nwitter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/salmon/GitSpace/study/React/nwitter/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{authService,dbService}from\"fbase\";import React,{useEffect,useState}from\"react\";import{useHistory}from\"react-router-dom\";// export default () => <Span>Profile</Span>;\nexport default(function(_ref){var userObj=_ref.userObj,refreshUser=_ref.refreshUser;var history=useHistory();var _useState=useState(userObj.displayName),_useState2=_slicedToArray(_useState,2),newDisplayname=_useState2[0],setNewDisplayName=_useState2[1];var onLogOutClick=function onLogOutClick(){authService.signOut();history.push(\"/\");};var onChange=function onChange(event){setNewDisplayName(event.target.value);};var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();if(!(userObj.displayName!==newDisplayname)){_context.next=5;break;}_context.next=4;return userObj.updateProfile({displayName:newDisplayname});case 4:refreshUser();case 5:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();var getMyNweets=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var nweets;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return dbService.collection(\"nweets\").where(\"creatorId\",\"==\",userObj.uid).orderBy(\"createdAt\").get();case 2:nweets=_context2.sent;console.log(nweets.docs.map(function(doc){return doc.data();}));// console.log(nweets.docs.map((doc) => doc.data()));\ncase 4:case\"end\":return _context2.stop();}}},_callee2);}));return function getMyNweets(){return _ref3.apply(this,arguments);};}();useEffect(function(){getMyNweets();},[]);return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:onSubmit,className:\"profileForm\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Display name\",onChange:onChange,value:newDisplayname,autoFocus:true,className:\"formInput\"}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Update Profile\",className:\"formBtn\",style:{marginTop:10}})),/*#__PURE__*/React.createElement(\"span\",{className:\"formBtn cancelBtn logOut\",onClick:onLogOutClick},\"Log Out\"));});","map":{"version":3,"sources":["/Users/salmon/GitSpace/study/React/nwitter/src/routes/Profile.js"],"names":["authService","dbService","React","useEffect","useState","useHistory","userObj","refreshUser","history","displayName","newDisplayname","setNewDisplayName","onLogOutClick","signOut","push","onChange","event","target","value","onSubmit","preventDefault","updateProfile","getMyNweets","collection","where","uid","orderBy","get","nweets","console","log","docs","map","doc","data","marginTop"],"mappings":"geAAA,OAASA,WAAT,CAAsBC,SAAtB,KAAuC,OAAvC,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAEA;AAEA,eAAe,cAA8B,IAA3BC,CAAAA,OAA2B,MAA3BA,OAA2B,CAAlBC,WAAkB,MAAlBA,WAAkB,CAC3C,GAAMC,CAAAA,OAAO,CAAGH,UAAU,EAA1B,CAD2C,cAECD,QAAQ,CAACE,OAAO,CAACG,WAAT,CAFT,wCAEpCC,cAFoC,eAEpBC,iBAFoB,eAG3C,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC1BZ,WAAW,CAACa,OAAZ,GACAL,OAAO,CAACM,IAAR,CAAa,GAAb,EACD,CAHD,CAKA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,CAAW,CAC1BL,iBAAiB,CAACK,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAjB,CACD,CAFD,CAIA,GAAMC,CAAAA,QAAQ,2FAAG,iBAAOH,KAAP,kHACfA,KAAK,CAACI,cAAN,GADe,KAEXd,OAAO,CAACG,WAAR,GAAwBC,cAFb,gDAIPJ,CAAAA,OAAO,CAACe,aAAR,CAAsB,CAAEZ,WAAW,CAAEC,cAAf,CAAtB,CAJO,QAKbH,WAAW,GALE,sDAAH,kBAARY,CAAAA,QAAQ,6CAAd,CASA,GAAMG,CAAAA,WAAW,2FAAG,0KACGrB,CAAAA,SAAS,CAC3BsB,UADkB,CACP,QADO,EAElBC,KAFkB,CAEZ,WAFY,CAEC,IAFD,CAEOlB,OAAO,CAACmB,GAFf,EAGlBC,OAHkB,CAGV,WAHU,EAIlBC,GAJkB,EADH,QACZC,MADY,gBAMlBC,OAAO,CAACC,GAAR,CAAYF,MAAM,CAACG,IAAP,CAAYC,GAAZ,CAAgB,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EAAhB,CAAZ,EACA;AAPkB,wDAAH,kBAAXZ,CAAAA,WAAW,2CAAjB,CASAnB,SAAS,CAAC,UAAM,CACdmB,WAAW,GACZ,CAFQ,CAEN,EAFM,CAAT,CAGA,mBACE,2BAAK,SAAS,CAAC,WAAf,eACE,4BAAM,QAAQ,CAAEH,QAAhB,CAA0B,SAAS,CAAC,aAApC,eACE,6BACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,cAFd,CAGE,QAAQ,CAAEJ,QAHZ,CAIE,KAAK,CAAEL,cAJT,CAKE,SAAS,KALX,CAME,SAAS,CAAC,WANZ,EADF,cASE,6BACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,gBAFR,CAGE,SAAS,CAAC,SAHZ,CAIE,KAAK,CAAE,CACLyB,SAAS,CAAE,EADN,CAJT,EATF,CADF,cAmBE,4BAAM,SAAS,CAAC,0BAAhB,CAA2C,OAAO,CAAEvB,aAApD,YAnBF,CADF,CAyBD,CA1DD","sourcesContent":["import { authService, dbService } from \"fbase\";\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\n// export default () => <Span>Profile</Span>;\n\nexport default ({ userObj, refreshUser }) => {\n  const history = useHistory();\n  const [newDisplayname, setNewDisplayName] = useState(userObj.displayName);\n  const onLogOutClick = () => {\n    authService.signOut();\n    history.push(\"/\");\n  };\n\n  const onChange = (event) => {\n    setNewDisplayName(event.target.value);\n  };\n\n  const onSubmit = async (event) => {\n    event.preventDefault();\n    if (userObj.displayName !== newDisplayname) {\n      //update\n      await userObj.updateProfile({ displayName: newDisplayname });\n      refreshUser();\n    }\n  };\n\n  const getMyNweets = async () => {\n    const nweets = await dbService\n      .collection(\"nweets\")\n      .where(\"creatorId\", \"==\", userObj.uid)\n      .orderBy(\"createdAt\")\n      .get();\n    console.log(nweets.docs.map((doc) => doc.data()));\n    // console.log(nweets.docs.map((doc) => doc.data()));\n  };\n  useEffect(() => {\n    getMyNweets();\n  }, []);\n  return (\n    <div className=\"container\">\n      <form onSubmit={onSubmit} className=\"profileForm\">\n        <input\n          type=\"text\"\n          placeholder=\"Display name\"\n          onChange={onChange}\n          value={newDisplayname}\n          autoFocus\n          className=\"formInput\"\n        />\n        <input\n          type=\"submit\"\n          value=\"Update Profile\"\n          className=\"formBtn\"\n          style={{\n            marginTop: 10,\n          }}\n        />\n      </form>\n      <span className=\"formBtn cancelBtn logOut\" onClick={onLogOutClick}>\n        Log Out\n      </span>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}